<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="kr">
<head>
    <meta charset="UTF-8">
    <title>방 상태</title>
    <th:block th:insert="~{fragment/menu::menu_css}"/>
    <link rel="stylesheet" type="text/css" href="/css/billboard.min.css"/>
    <script src='js/d3/d3.min.js'></script>
    <script src='js/billboard.min.js'></script>
</head>
<body>
<nav th:replace="~{fragment/menu::menu_nav}"></nav>
<select id="list">
    <option value='' selected>- 선택 -</option>
</select>
<div id="chart"></div>

<a href="register_equipment"><input type="button" value="기기 등록"/></a>
<script>
    var host = '/home_info';

    function inflate() {
        $.get(host + "/equipment_list", function (equipment) {
            var selectList = $("#list");
            selectList.empty();
            $.each(equipment, function (index, value) {
                selectList.append('<option value=' + value.name + '> ' + value.name + '</option>');
            });

        });
    }

    function getInfo() {
        $.get(host + "/info_list", function (info) {
            var data2 = [];
            data2.push("data2");

            $.each(info, function (index, value) {
                data2.push(10)
            });
            bb.generate({
                bindto: "#chart",
                data: {
                    columns: [
                        ["data1", 30, 80, 100, 70, 90, 20],
                        data2
                    ],
                    types: {
                        data1: "line",
                        data2: "line"
                    },
                    colors: {
                        data1: "red",
                        data2: "green"
                    }
                }
            });
        });
    }

    $(document).ready(function () {
        inflate();
        getInfo();
    });
</script>
</body>
</html>